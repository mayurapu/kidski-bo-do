<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã€ç·´ç¿’ã€‘ã‹ãŠã‚‚ã˜ã‚’ä½œã‚ã†ï¼</title>
  <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #fce4ec;
      font-family: "UD Digi Kyokasho N-R", "Kosugi Maru", sans-serif;
      margin: 20px;
      text-align: center;
      color: #333;
    }

    h1 {
      color: #c2185b;
      font-size: 26px;
      border-bottom: 4px solid #f06292;
      display: inline-block;
      padding-bottom: 5px;
    }

    .info-box {
      background: white;
      border: 3px solid #f06292;
      border-radius: 20px;
      padding: 15px;
      margin: 10px auto;
      max-width: 700px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .score-area {
      font-size: 20px;
      font-weight: bold;
      color: #ad1457;
      margin-bottom: 10px;
    }

    .warning-hint {
      background-color: #fff9c4;
      padding: 10px;
      border-radius: 10px;
      border: 2px dashed #fbc02d;
      margin-bottom: 15px;
      font-size: 16px;
    }

    #question-container {
      margin: 20px 0;
    }

    #emotion-label {
      font-size: 22px;
      color: #f06292;
      font-weight: bold;
      margin-bottom: 5px;
    }

    #question-display {
      font-size: 70px;
      font-weight: bold;
      color: #333;
      background: white;
      display: inline-block;
      padding: 20px 40px;
      border-radius: 30px;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      min-width: 300px;
    }

    #input-area {
      font-size: 45px;
      padding: 10px;
      border: 5px solid #f06292;
      border-radius: 15px;
      width: 450px;
      text-align: center;
      outline: none;
    }

    #quote-display {
      margin-top: 15px;
      padding: 15px;
      background: #fff3e0;
      border-radius: 10px;
      border-left: 10px solid #ff9800;
      display: none; 
      text-align: left;
      font-size: 20px;
      animation: bounce 0.5s;
    }

    @keyframes bounce {
      0% { transform: scale(0.8); }
      70% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .guide {
      margin-top: 20px;
      background: white;
      padding: 20px;
      border-radius: 15px;
      display: inline-block;
      border: 2px solid #f06292;
      max-width: 800px;
    }

    .guide table { width: 100%; border-collapse: collapse; }
    .guide td { padding: 8px 15px; text-align: left; border-bottom: 1px solid #fce4ec; font-size: 18px; }
    .key-cap { background: #eee; border: 2px solid #666; border-radius: 5px; padding: 2px 8px; font-weight: bold; font-size: 18px; box-shadow: 0 2px 0 #999; display: inline-block; min-width: 20px; text-align: center; }
    .plus { margin: 0 5px; font-weight: bold; color: #c2185b; }
    .success { background-color: #c8e6c9 !important; border-color: #4caf50 !important; }
  </style>
</head>
<body onload="initGame()">

  <h1>âœ¨ ãã”ã†ã§ã€Œã‹ãŠã‚‚ã˜ã€ãƒŸãƒƒã‚·ãƒ§ãƒ³ï¼ âœ¨</h1>

  <div class="info-box">
    <div class="score-area">
      ã®ã“ã‚Šï¼š<span id="timer">90</span>ç§’ã€€
      ã‚¯ãƒªã‚¢æ•°ï¼š<span id="currentScore">0</span>
    </div>
    
    <div class="warning-hint">
      âš ï¸ <b>ã†ã¦ãŸã‚‰ã€Enterã€‘ã‚’ï¼’å›ãƒˆãƒ³ãƒˆãƒ³ï¼ã¨ãŠãã†ï¼</b><br>
      ã§ãªã„ã¨ãã¯ <span class="key-cap">åŠè§’ï¼å…¨è§’</span> ãƒœã‚¿ãƒ³ã‚’ãŠã—ã¦ã­ï¼
    </div>

    <div id="message" style="font-weight: bold; color: #ad1457;">ä¸‹ã®ã‚¬ã‚¤ãƒ‰ã‚’è¦‹ãªãŒã‚‰ä½œã£ã¦ã¿ã‚ˆã†ï¼</div>

    <div id="quote-display"></div>
  </div>

  <div id="question-container">
    <div id="emotion-label">ã„ã¾ã®ãã‚‚ã¡ï¼š---</div>
    <div id="question-display">---</div>
  </div>

  <input type="text" id="input-area" onkeydown="handleKey(event)" autocomplete="off">

  <div class="guide">
    <strong>ğŸ’¡ ãã”ã†ã®æ‰“ã¡ã‹ãŸã‚¬ã‚¤ãƒ‰</strong><br><br>
    <table>
      <tr>
        <td><b>( )</b> ã‹ã£ã“</td>
        <td><span class="key-cap">Shift</span> <span class="plus">ï¼‹</span> <span class="key-cap">8</span> ã¨ <span class="key-cap">9</span></td>
        <td><b>^</b> ãŠã‚ã‚</td>
        <td><span class="key-cap">ã¸</span> ï¼ˆãã®ã¾ã¾ï¼‰</td>
      </tr>
      <tr>
        <td><b>_</b> ãã¡ãƒ»ã—ãŸ</td>
        <td><span class="key-cap">Shift</span> <span class="plus">ï¼‹</span> <span class="key-cap">ã‚</span></td>
        <td><b>-</b> ã­ã‚€ã‚Šç›®</td>
        <td><span class="key-cap">ã»</span> ï¼ˆãã®ã¾ã¾ï¼‰</td>
      </tr>
      <tr>
        <td><b>;</b> ã‚ã›</td>
        <td><span class="key-cap">ã‚Œ</span> ï¼ˆãã®ã¾ã¾ï¼‰</td>
        <td><b>o</b> ãŠãã¡</td>
        <td><span class="key-cap">O</span> ï¼ˆã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆï¼‰</td>
      </tr>
      <tr>
        <td><b>! ?</b> ã³ã£ãã‚Š</td>
        <td><span class="key-cap">Shift</span> <span class="plus">ï¼‹</span> <span class="key-cap">1</span> ã¨ <span class="key-cap">/</span></td>
        <td><b>/ \</b> ã¦ãƒ»ã‹ãŠ</td>
        <td><span class="key-cap">/</span>ï¼ˆã‚ã„ï¼‰ <span class="key-cap">\</span>ï¼ˆã‚ï¼‰</td>
      </tr>
      <tr>
        <td><b>T</b> ãªã¿ã </td>
        <td><span class="key-cap">Shift</span> <span class="plus">ï¼‹</span> <span class="key-cap">T</span></td>
        <td><b>v</b> ã´ãƒ¼ã™</td>
        <td><span class="key-cap">V</span> ï¼ˆã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆï¼‰</td>
      </tr>
    </table>
  </div>

  <script>
    const ANIME_QUOTES = [
      "ã€Œã‚ãã‚‰ã‚ãŸã‚‰ ãã“ã§ã—ã‚ã„ã—ã‚…ã†ã‚Šã‚‡ã†ã§ã™ã‚ˆâ€¦ï¼Ÿã€",
      "ã€Œã‚ãã‚ãã£ï¼ã‚ˆããŒã‚“ã°ã£ãŸã¾ã™ï¼ã€",
      "ã€Œã‚¿ã‚¤ãƒ”ãƒ³ã‚°çˆ†é€Ÿç•Œéšˆã€",
      "ã€Œã•ãƒ¼ã¦ï¼Œæ¥é€±ã®ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã•ã‚“ã¯ãƒ¼ï¼Ÿã€",
      "ã€ŒãŠã¿ãã˜ï¼šå¤§å‰ï¼ã‚„ã£ãŸã­ï¼ãƒ©ãƒƒã‚­ãƒ¼ã‚«ãƒ©ãƒ¼ã¯é’ï¼ã€",
      "ã€Œå…¨é›†ä¸­ï¼ãã®æ„æ°—ã ï¼ã€",
      "ã€Œé€ƒã’ã¡ã‚ƒãƒ€ãƒ¡ã â€¦ãªã‚“ã¦æ€ã‚ãªãã¦ã„ã„ï¼ã‚ˆãã‚„ã£ãŸï¼ã€",
      "ã€Œè¨˜å·ç‹ã« ãŠã‚Œã¯ãªã‚‹ï¼ã€",
      "ã€Œç™–ã«ãªã£ã¦ã‚“ã ï¼Œè¨˜å·æ‰“ã¤ã®ã€€å®¶åº­ã®äº‹æƒ…ã§ãªã€",
      "ã€ŒãŠã¿ãã˜ï¼šä¸­å‰ï¼ãŠã¨ã‚‚ã ã¡ã«ã—ã‚“ã›ã¤ã«ã™ã‚‹ã¨ãƒ©ãƒƒã‚­ãƒ¼ï¼ã€",
      "ã€Œã“ã‚“ãªã«æ‰“ã¦ã‚‹ãªã‚“ã¦ï¼Œã‚ªãƒ©ã‚ãã‚ãã™ã£ãï¼ã€",
      "ã€Œï¼™ï¼ç§’ã§æ‰“ã£ã¦ã¿ãªã€",
      "ã€ŒãŠã‚Œã¯äººé–“ã‚’ã‚„ã‚ã‚‹ãï¼Œã‚¸ãƒ§ã‚¸ãƒ§â€•ãƒƒï¼ã€",
      "ã€Œå‡ï¼ˆã‚®ãƒ§ã‚¦ï¼‰ã‚’ä½¿ãˆï¼è¨˜å·ã®ä½ç½®ãŒè¦‹ãˆã‚‹ã¯ãšã ï¼ã€",
      "ã€Œã‚¢ãƒªãƒ¼ãƒ´ã‚§ãƒ‡ãƒ«ãƒï¼ˆã•ã‚ˆãªã‚‰ã ï¼‰ã€",
      "ã€ŒãŠã¿ãã˜ï¼šå‰ï¼é›†ä¸­åŠ›ã‚¢ãƒƒãƒ—ï¼å®¿é¡ŒãŒã¯ã‚„ããŠã‚ã‚‹ã‹ã‚‚ã€",
      "ã€Œè¨˜å·ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã¨ã‹ãªã„ã‚“ã‹ï¼Ÿã€",
      "ã€Œã¨ã¾ã‚‹ã‚“ã˜ã‚ƒã­ã‡ãã€",
      "ã€Œã™ã€‚ã™ã”ã„ã­â€¦ãƒƒï¼ã€ã€Œãƒ¯â€¦ãƒ¯ã‚¡â€¦ãƒƒï¼ã€",
      "ã€Œå‹ã£ãŸãƒƒï¼ã€Œç¬¬ï¼“éƒ¨ã€å®Œï¼ï¼ã€",
      "ã€Œæ‰“ã£ãŸãªï¼è¦ªçˆ¶ã‚‚æ‰“ã¦ãŸäº‹ãªã„ã®ã«ï¼ï¼ã€",
      "ã€Œè¨˜å·ã®å‘¼å¸ï¼Œå£±ãƒå‹ï¼ã€",
      "ã€ŒãŠã¿ãã˜ï¼šå‰ï¼å…ˆç”Ÿã®ã“ã¨ã°ã«ãªã‚„ã¿ã®ãƒ’ãƒ³ãƒˆãŒã‚ã‚‹ã‹ã‚‚ï¼ã€",
      "ã€Œè¦‹ãŸç›®ã¯å­ã©ã‚‚ï¼Œã‚¿ã‚¤ãƒ”ãƒ³ã‚°åŠ›ã¯å¤§äººï¼ã€",
      "ã€Œæ‰“ã¦ã‚‹â€¦ï¼ç§ã«ã‚‚è¨˜å·ãŒæ‰“ã¦ã‚‹ãâ€¦â€¦ï¼ã€",
      "ã€Œé«˜è©•ä¾¡ã¨ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã€ã‚ˆã‚ã—ãã­ï¼ã€",
      "ã€Œæ„Ÿè¬ã®æ­£æ‹³çªãâ€¦ãªã‚‰ã¬ã€æ„Ÿè¬ã®ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ï¼‘ä¸‡å›ï¼ã€",
      "(" + "ãŠã¾ãˆã®æ¬¡ã®ã‚»ãƒªãƒ•ã¯ã€è¨˜å·ã‚€ãšã™ãï¼ã€ã¨ã„ã†ï¼" + ")",
      "ã€ŒãŠã¾ãˆã¯ä»Šã¾ã§æ‰“ã£ãŸã‚­ãƒ¼ã®æ•°ã‚’è¦šãˆã¦ã„ã‚‹ã®ã‹ï¼Ÿã€",
      "ã€ŒCHUï¼æ‰“ã¦ã™ãã¦ã”ã‚ã‚“ï¼ã€",
      "ã€Œè¦šæ‚Ÿã¯ã„ã„ã‹ï¼Ÿ ãŠã‚Œã¯ã§ãã¦ã‚‹ã€"
    ];

    const FACE_MISSIONS = [
      { face: "(^^)", name: "ã«ã£ã“ã‚Š" }, { face: "(^-^)", name: "ã«ã“ã£" },
      { face: "(ToT)", name: "ãˆãƒ¼ã‚“" }, { face: "(^o^)", name: "ã‚ãƒ¼ã„" },
      { face: "(^^;)", name: "ã‚ã›ã‚ã›" }, { face: "(-_-)", name: "ã­ã‚€ã„â€¦" },
      { face: "(^^)/", name: "ã‚„ã£ã»ãƒ¼" }, { face: "(^_-)", name: "ã†ã„ã‚“ã" },
      { face: "!(^^)!", name: "ã°ã‚“ã–ã„ï¼" }, { face: "(?_?)", name: "ã¯ã¦ãªï¼Ÿ" },
      { face: "(^^)v", name: "ã´ãƒ¼ã™ï¼" }
    ];

    let score = 0;
    let timeLeft = 90;
    let currentTarget = "";
    let isPlaying = false;
    let timerID;

    const display = document.getElementById("question-display");
    const label = document.getElementById("emotion-label");
    const inputArea = document.getElementById("input-area");
    const quoteDisplay = document.getElementById("quote-display");

    function initGame() {
      score = 0;
      timeLeft = 90;
      isPlaying = false;
      document.getElementById("currentScore").textContent = "0";
      document.getElementById("timer").textContent = "90";
      document.getElementById("message").textContent = "ãƒˆãƒ³ãƒˆãƒ³ï¼ã¨ï¼’å› Enter ã‚’ãŠã™ã®ãŒã‚³ãƒ„ã ã‚ˆï¼";
      quoteDisplay.style.display = "none";
      inputArea.readOnly = false;
      inputArea.value = "";
      inputArea.focus();
      nextQuestion();
    }

    function nextQuestion() {
      const item = FACE_MISSIONS[Math.floor(Math.random() * FACE_MISSIONS.length)];
      currentTarget = item.face;
      label.textContent = "ã„ã¾ã®ãã‚‚ã¡ï¼š " + item.name;
      display.textContent = currentTarget;
      inputArea.value = "";
      inputArea.classList.remove("success");
    }

    function handleKey(e) {
      if (timeLeft <= 0) {
        if (e.code === "Space") initGame();
        return;
      }
      if (!isPlaying && e.key !== "Enter" && e.key !== "Process") {
        startTimer();
      }
      if (e.key === "Enter") {
        // å°‘ã—é…ã‚‰ã›ã¦ç¢ºå®šå¾Œã®æ–‡å­—ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã‚ˆ
        setTimeout(() => {
          if (inputArea.value === currentTarget) {
            score++;
            document.getElementById("currentScore").textContent = score;
            inputArea.classList.add("success");
            setTimeout(nextQuestion, 200);
          }
        }, 10);
      }
    }

    function startTimer() {
      isPlaying = true;
      timerID = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").textContent = timeLeft;
        if (timeLeft <= 0) {
          clearInterval(timerID);
          isPlaying = false;
          inputArea.readOnly = true;
          display.textContent = "Time Up!";
          
          const randomQuote = ANIME_QUOTES[Math.floor(Math.random() * ANIME_QUOTES.length)];
          quoteDisplay.innerHTML = `<strong>â˜… ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ â˜…</strong><br>${randomQuote}`;
          quoteDisplay.style.display = "block";

          document.getElementById("message").innerHTML = 
            `<b>${score}ã“ ã‚¯ãƒªã‚¢ï¼</b><br>ãƒªãƒˆãƒ©ã‚¤ã¯ <span class="key-cap" style="box-shadow:none;">ã‚¹ãƒšãƒ¼ã‚¹</span> ã‚’ãŠã—ã¦ã­ï¼`;
        }
      }, 1000);
    }
  </script>
</body>
</html>